{"version":3,"sources":["constants.ts","audioCore.js","components/Sidebar/Select.tsx","components/Sidebar/ScaleSettings.tsx","components/Sidebar/ScaleSettingsContainer.ts","actions/audio.ts","components/Note/Note.tsx","components/Tuner/Tuner.tsx","components/Sidebar/StartRecording.tsx","components/Sidebar/Heading.tsx","components/Sidebar/SidebarItem.tsx","components/Sidebar/Sidebar.tsx","components/Sidebar/SidebarContainer.ts","components/Note/NoteContainer.ts","components/Guitar/Guitar.tsx","components/Piano/Piano.tsx","components/Main.tsx","components/MainContainer.ts","theme.ts","components/Layout.tsx","components/App.tsx","components/AppContainer.ts","serviceWorker.ts","utils.ts","reducers/audio.ts","reducers/guitar.ts","reducers/piano.ts","reducers/root.ts","store.ts","index.tsx"],"names":["NOTES","DIATONIC_SCALES","LYDIAN","MAJOR","MIXOLYDIAN","DORIAN","MINOR","PHRIGIAN","LOCRIAN","SCALES","SHOW_ALL","Array","fill","HARMONIC_MAJOR","MELODIC_MAJOR","MAJOR_PENTATONIC","MAJOR_BLUES","HARMONIC_MINOR","MELODIC_MINOR","MINOR_PENTATONIC","MINOR_BLUES","SCALES_KEYS","Object","keys","reduce","res","key","CUSTOM_SCALES_NAMES","SCALES_NAMES","split","map","sub","toUpperCase","slice","toLowerCase","join","ACTION_TYPES","middleA","semitone","bufferSize","_initGetUserMedia","window","AudioContext","webkitAudioContext","alert","undefined","navigator","mediaDevices","getUserMedia","constraints","webkitGetUserMedia","mozGetUserMedia","Promise","resolve","reject","call","audio","then","stream","audioContext","createMediaStreamSource","connect","analyser","scriptProcessor","destination","addEventListener","event","frequency","pitchDetector","do","inputBuffer","getChannelData","note","getNote","noteData","name","value","cents","getCents","octave","Math","floor","emit","catch","error","message","this","createAnalyser","createScriptProcessor","Aubio","aubio","Pitch","sampleRate","startRecord","log","round","pow","getStandardFrequency","oscillator","createOscillator","start","stop","EventEmitter","SelectKey","options","onSelect","selectedValue","title","optionsElements","MenuItem","id","uuid","v4","FormControl","fullWidth","variant","InputLabel","htmlFor","Select","inputProps","onChange","target","scaleKeysOptions","scalesOptions","entries","ScaleSettings","selectedScale","onSelectKey","onSelectScale","Grid","container","spacing","item","xs","dispatch","type","payload","scale","Note","isSimilar","isActive","isInScale","isKey","classNames","string","push","className","Arrow","Tuner","playingNote","StartRecording","Button","color","onClick","aria-label","role","Heading","children","Typography","gutterBottom","useStyles","makeStyles","theme","paper","padding","palette","text","secondary","SidebarItem","classes","Paper","Sidebar","isMicActive","switchMic","audioService","init","notes","includes","Cell","Zero","Guitar","frets","startNotes","strings","i","cells","startNote","startNoteIndex","indexOf","fretsWithZero","j","newNoteIndex","length","Key","Piano","octaves","keysCount","noteIndex","Main","guitarOpenStrings","pianoStartNote","createMuiTheme","root","display","drawer","breakpoints","up","width","flexShrink","menuButton","left","top","position","zIndex","modal","toolbar","mixins","drawerPaper","background","border","down","paddingTop","content","flexGrow","minWidth","Layout","menuIcon","React","useState","mobileOpen","setMobileOpen","handleDrawerToggle","showMicIcon","Fab","size","Hidden","mdUp","implementation","Drawer","anchor","open","onClose","ModalProps","keepMounted","smDown","App","on","notesData","setter","props","setPlayingNote","ThemeProvider","SidebarContainer","MainContainer","Component","Boolean","location","hostname","match","generateScaleNotes","scaleName","scaleKey","pattern","nextNoteIndex","INITIAL_STATE","DEFAULT_START_NOTES","DEFAULT_START_NOTE","combineReducers","state","action","newName","newKey","middlewares","thunk","enhancer","applyMiddleware","createStore","reducers","render","ReactDOM","store","AppContainer","document","getElementById","subscribe","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.0a3b7b85.chunk.js","sourcesContent":["import { ScaleKeys, ScalesIntervals, ScalesTranslations } from './types';\n\nexport const NOTES: Array<string> = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];\n\nexport const DIATONIC_SCALES = {\n  MAJOR: {\n    LYDIAN: [2, 2, 2, 1, 2, 2, 1],\n    MAJOR: [2, 2, 1, 2, 2, 2, 1],\n    MIXOLYDIAN: [2, 2, 1, 2, 2, 1, 2],\n    DORIAN: [2, 1, 2, 2, 2, 1, 2],\n  },\n\n  MINOR: {\n    MINOR: [2, 1, 2, 2, 1, 2, 2],\n    PHRIGIAN: [1, 2, 2, 2, 1, 2, 2],\n    LOCRIAN: [1, 2, 2, 1, 2, 2, 2],\n  },\n};\n\nexport const SCALES = {\n  SHOW_ALL: Array(12).fill(1),\n\n  ...DIATONIC_SCALES.MAJOR,\n  ...DIATONIC_SCALES.MINOR,\n\n  HARMONIC_MAJOR: [2, 2, 1, 2, 1, 3, 1],\n  MELODIC_MAJOR: [2, 2, 1, 2, 1, 2, 2],\n  MAJOR_PENTATONIC: [2, 2, 3, 2, 3],\n  MAJOR_BLUES: [2, 1, 1, 3, 2, 3],\n\n  HARMONIC_MINOR: [2, 1, 2, 2, 1, 3, 1],\n  MELODIC_MINOR: [2, 1, 2, 2, 2, 2, 1],\n  MINOR_PENTATONIC: [3, 2, 2, 3, 2],\n  MINOR_BLUES: [3, 2, 1, 1, 3, 2],\n} as ScalesIntervals;\n\nexport const SCALES_KEYS = Object.keys(SCALES).reduce((res, key) => {\n  res[key] = key;\n\n  return res;\n}, {} as ScaleKeys);\n\nconst CUSTOM_SCALES_NAMES = {\n  MAJOR: 'Major/Ionian',\n  MINOR: 'Minor/Aeolian',\n} as ScalesTranslations;\n\nexport const SCALES_NAMES = Object.keys(SCALES).reduce((res, key) => {\n  res[key] = CUSTOM_SCALES_NAMES[key] ? CUSTOM_SCALES_NAMES[key] : key\n    .split('_')\n    .map(sub => sub[0].toUpperCase() + sub.slice(1).toLowerCase())\n    .join(' ');\n\n  return res;\n}, {} as ScalesTranslations);\n\nexport const ACTION_TYPES = {\n  SET_PLAYING_NOTE: 'SET_PLAYING_NOTE',\n  SET_MIC_LISTEN: 'SET_MIC_LISTEN',\n\n  SET_GUITAR_STRING_START_NOTE: 'SET_GUITAR_STRING_START_NOTE',\n  SET_PIANO_START_NOTE: 'SET_PIANO_START_NOTE',\n\n  SET_SCALE_NAME: 'SET_SCALE_NAME',\n  SET_SCALE_KEY: 'SET_SCALE_KEY',\n};\n\n","import EventEmitter from 'wolfy87-eventemitter';\nimport { NOTES } from './constants';\n\nclass AudioService extends EventEmitter {\n  middleA = 440;\n  semitone = 69;\n  bufferSize = 8192;\n\n  constructor() {\n    super();\n\n    this._initGetUserMedia();\n  }\n\n  _initGetUserMedia() {\n    window.AudioContext = window.AudioContext || window.webkitAudioContext;\n    if (!window.AudioContext) {\n      return alert('AudioContext not supported');\n    }\n\n    // Older browsers might not implement mediaDevices at all, so we set an empty object first\n    if (navigator.mediaDevices === undefined) {\n      navigator.mediaDevices = {};\n    }\n\n    // Some browsers partially implement mediaDevices. We can't just assign an object\n    // with getUserMedia as it would overwrite existing properties.\n    // Here, we will just add the getUserMedia property if it's missing.\n    if (navigator.mediaDevices.getUserMedia === undefined) {\n      navigator.mediaDevices.getUserMedia = function (constraints) {\n        // First get ahold of the legacy getUserMedia, if present\n        const getUserMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n\n        // Some browsers just don't implement it - return a rejected promise with an error\n        // to keep a consistent interface\n        if (!getUserMedia) {\n          alert('getUserMedia is not implemented in this browser');\n        }\n\n        // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\n        return new Promise(function (resolve, reject) {\n          getUserMedia.call(navigator, constraints, resolve, reject);\n        })\n      }\n    }\n  }\n\n  startRecord() {\n    navigator.mediaDevices\n      .getUserMedia({ audio: true })\n      .then(stream => {\n        this.audioContext.createMediaStreamSource(stream).connect(this.analyser);\n        this.analyser.connect(this.scriptProcessor);\n        this.scriptProcessor.connect(this.audioContext.destination);\n\n        this.scriptProcessor.addEventListener('audioprocess', event => {\n\n          const frequency = this.pitchDetector.do(event.inputBuffer.getChannelData(0));\n\n          if (frequency) {\n            const\n              note = this.getNote(frequency),\n              noteData = {\n                name: NOTES[note % 12],\n                value: note,\n                cents: this.getCents(frequency, note),\n                octave: Math.floor(note / 12) - 1,\n                frequency: frequency,\n              };\n\n            if (note >= 30) {\n              this.emit('notesDetected', [noteData]);\n            }\n          }\n        });\n      })\n      .catch(function (error) {\n        alert(error.name + ': ' + error.message);\n      });\n  }\n\n  init() {\n    this.audioContext = new window.AudioContext();\n    this.analyser = this.audioContext.createAnalyser();\n    this.scriptProcessor = this.audioContext.createScriptProcessor(this.bufferSize);\n\n    window.Aubio().then(aubio => {\n      this.pitchDetector = new aubio.Pitch('default', this.bufferSize, 1, this.audioContext.sampleRate);\n      this.startRecord();\n    });\n  }\n\n  /**\n   * get musical Note from frequency\n   *\n   * @param {number} frequency\n   * @returns {number}\n   */\n  getNote(frequency) {\n    const note = 12 * (Math.log(frequency / this.middleA) / Math.log(2));\n    return Math.round(note) + this.semitone;\n  }\n\n  /**\n   * get the musical Note's standard frequency\n   *\n   * @param note\n   * @returns {number}\n   */\n  getStandardFrequency(note) {\n    return this.middleA * Math.pow(2, (note - this.semitone) / 12);\n  }\n\n  /**\n   * get cents difference between given frequency and musical Note's standard frequency\n   *\n   * @param {number} frequency\n   * @param {number} note\n   * @returns {number}\n   */\n  getCents(frequency, note) {\n    return Math.floor((1200 * Math.log(frequency / this.getStandardFrequency(note))) / Math.log(2))\n  }\n\n  /**\n   * play the musical Note\n   *\n   * @param {number} frequency\n   */\n  play(frequency) {\n    if (!this.oscillator) {\n      this.oscillator = this.audioContext.createOscillator();\n      this.oscillator.connect(this.audioContext.destination);\n      this.oscillator.start();\n    }\n\n    this.oscillator.frequency.value = frequency;\n  }\n\n  stop() {\n    this.oscillator.stop();\n    this.oscillator = null;\n  }\n}\n\nexport default new AudioService();\n","import { FormControl, InputLabel, MenuItem, Select } from '@material-ui/core';\nimport React from 'react';\nimport uuid from 'uuid';\n\ntype SelectValue = string;\n\nexport type SelectOption = {\n  name: string,\n  value: SelectValue\n}\n\nexport interface IProps {\n  options: SelectOption[],\n  title: string,\n  selectedValue: SelectValue,\n  onSelect: (key: SelectValue) => void,\n}\n\nconst SelectKey: React.FC<IProps> = ({ options, onSelect, selectedValue, title }) => {\n  const\n    optionsElements = options.map(({ name, value }) => <MenuItem key={value} value={value}>{name}</MenuItem>),\n    handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n      onSelect(event.target.value as string);\n    },\n    id = uuid.v4();\n\n  return (\n    <FormControl fullWidth variant=\"filled\">\n      <InputLabel htmlFor={id}>\n        {title}\n      </InputLabel>\n      <Select\n        value={selectedValue}\n        inputProps={{ id }}\n        onChange={handleChange}\n      >\n        {optionsElements}\n      </Select>\n    </FormControl>\n  );\n};\n\nexport default SelectKey;\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport Select, { SelectOption } from './Select';\nimport { SelectedScale } from '../../types';\nimport { NOTES, SCALES_NAMES } from '../../constants';\n\nexport interface IProps {\n  selectedScale: SelectedScale,\n  onSelectKey: (key: string) => void,\n  onSelectScale: (key: string) => void,\n}\n\nconst scaleKeysOptions: SelectOption[] = NOTES.map(note => ({\n  name: note,\n  value: note,\n}));\n\nconst scalesOptions: SelectOption[] = Object.entries(SCALES_NAMES).map(([key, name]) => ({ name, value: key }));\n\nconst ScaleSettings: React.FC<IProps> = ({ selectedScale, onSelectKey, onSelectScale }) => {\n  return (\n    <Grid container spacing={2}>\n      <Grid item xs={12}>\n        <Select\n          selectedValue={selectedScale.key}\n          options={scaleKeysOptions}\n          onSelect={onSelectKey}\n          title='Select key'\n        />\n      </Grid>\n      <Grid item xs={12}>\n        <Select\n          selectedValue={selectedScale.name}\n          options={scalesOptions}\n          onSelect={onSelectScale}\n          title='Select scale'\n        />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default ScaleSettings;\n","import { connect } from 'react-redux';\nimport { selectScale, selectScaleKey } from '../../actions/audio';\nimport { Dispatch } from 'redux';\nimport { IStore } from '../../types';\nimport ScaleSettings, { IProps } from './ScaleSettings';\n\ntype StateProps = Pick<IProps, 'selectedScale'>;\ntype DispatchProps = Pick<IProps, 'onSelectKey' | 'onSelectScale'>\n\nconst mapStateToProps = (\n  { selectedScale }: IStore\n): StateProps => ({\n  selectedScale,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => ({\n  onSelectKey: (key: string) => dispatch(selectScaleKey(key)),\n  onSelectScale: (scale: string) => dispatch(selectScale(scale)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ScaleSettings);\n","import { ACTION_TYPES } from '../constants';\nimport { Note } from '../types';\n\nexport const switchMic = (isMicActive: boolean) => ({\n  type: ACTION_TYPES.SET_MIC_LISTEN,\n  payload: isMicActive,\n});\n\nexport const setPlayingNote = (note: Note) => ({\n  type: ACTION_TYPES.SET_PLAYING_NOTE,\n  payload: note,\n});\n\nexport const selectScale = (scaleName: string) => ({\n  type: ACTION_TYPES.SET_SCALE_NAME,\n  payload: scaleName,\n});\n\nexport const selectScaleKey = (scaleKey: string) => ({\n  type: ACTION_TYPES.SET_SCALE_KEY,\n  payload: scaleKey,\n});\n","import React from 'react';\nimport './Note.scss';\nimport { Note as NoteType } from '../../types';\n\nexport interface IProps extends NoteType {\n  isActive?: boolean,\n  isSimilar?: boolean,\n  isInScale?: boolean,\n  isKey?: boolean,\n}\n\nconst Note: React.FC<IProps> = ({ name, octave, isSimilar = false, isActive = true, isInScale = true, isKey = false }) => {\n  const\n    classNames = ['note', `note--${name[0].toLowerCase()}${name[1] === '#' ? '-diez' : ''}`],\n    string = `${name}${octave ? octave : ''}`;\n\n  if (isSimilar) {\n    classNames.push('is-similar');\n  }\n\n  if (isActive) {\n    classNames.push('is-active');\n  }\n\n  if (!isInScale) {\n    classNames.push('is-disabled');\n  }\n\n  if (isKey) {\n    classNames.push('is-key');\n  }\n\n  return (\n    <div className={classNames.join(' ')}>{string}</div>\n  );\n};\n\n\nexport default Note;\n","import React from 'react';\nimport './Tuner.scss';\nimport Note from '../Note/Note';\nimport { PlayingNote as PlayingNoteType } from '../../types';\n\nconst REASONABLE_DELTA = 10;\n\ninterface TunerArrow {\n  isActive: boolean\n}\n\nconst Arrow: React.FC<TunerArrow> = ({ isActive }) => {\n  const classNames = ['tuner__arrow'];\n\n  if (isActive) {\n    classNames.push('is-active');\n  }\n\n  return (\n    <div className={classNames.join(' ')}/>\n  );\n};\n\ninterface IProps {\n  playingNote: PlayingNoteType\n}\n\nconst Tuner: React.FC<IProps> = ({ playingNote }) => {\n  return (\n    <div className='tuner'>\n      <div className=\"tuner__col\">\n        <Arrow isActive={playingNote.cents < -REASONABLE_DELTA}/>\n      </div>\n      <div className=\"tuner__col tuner__note\">\n        <Note\n          isActive={playingNote.cents >= -REASONABLE_DELTA && playingNote.cents <= REASONABLE_DELTA}\n          name={playingNote.name}\n          octave={playingNote.octave}\n        />\n      </div>\n      <div className=\"tuner__col\">\n        <Arrow isActive={playingNote.cents > REASONABLE_DELTA}/>\n      </div>\n    </div>\n  );\n};\n\nexport default Tuner;\n","import { Button } from '@material-ui/core';\nimport React from 'react';\n\ninterface IProps {\n  start: () => void\n}\n\nconst StartRecording: React.FC<IProps> = ({ start }) => (\n  <Button fullWidth variant='contained' color='secondary' onClick={start}>\n    <span aria-label='microphone' role='img'>ðŸŽ¤</span>&nbsp;Enable Recording\n  </Button>\n);\n\nexport default StartRecording;\n","import React from 'react';\nimport { Typography } from '@material-ui/core';\n\nconst Heading: React.FC = ({ children }) => (\n  <Typography variant=\"h6\" gutterBottom>\n    {children}\n  </Typography>\n);\nexport default Heading;\n","import React from 'react';\nimport { makeStyles, Paper } from '@material-ui/core';\nimport Heading from './Heading';\n\nconst\n  useStyles = makeStyles(theme => ({\n    paper: {\n      padding: theme.spacing(2),\n      color: theme.palette.text.secondary,\n    },\n  }));\n\nexport interface IProps {\n  title: string,\n}\n\nconst SidebarItem: React.FC<IProps> = ({ title, children }) => {\n  const classes = useStyles();\n\n  return (\n    <div className=\"sidebar__item\">\n      <Paper className={classes.paper}>\n        <Heading>\n          {title}\n        </Heading>\n        {children}\n      </Paper>\n    </div>\n  );\n};\n\nexport default SidebarItem;\n","import React from 'react';\nimport './Sidebar.scss';\nimport audioService from '../../audioCore';\nimport ScaleSettings from './ScaleSettingsContainer';\nimport Tuner from '../Tuner/Tuner';\nimport StartRecording from './StartRecording';\nimport SidebarItem from './SidebarItem';\nimport { PlayingNote as PlayingNoteType } from '../../types';\n\nexport interface IProps {\n  isMicActive: boolean,\n  playingNote: PlayingNoteType,\n  switchMic: (key: boolean) => void,\n}\n\nconst Sidebar: React.FC<IProps> = (\n  { isMicActive, playingNote, switchMic }\n) => {\n  const\n    initAudio = () => {\n      switchMic(true);\n      audioService.init();\n    };\n\n  return (\n    <div className='sidebar'>\n      <div className=\"sidebar__in\">\n\n        <SidebarItem title='Mini Tuner'>\n          {!isMicActive ? (\n            <StartRecording start={initAudio}/>\n          ) : (\n            <Tuner playingNote={playingNote}/>\n          )}\n        </SidebarItem>\n\n        <SidebarItem title='Scale Settings'>\n          <ScaleSettings/>\n        </SidebarItem>\n      </div>\n    </div>\n  );\n};\n\n\nexport default Sidebar;\n","import { connect } from 'react-redux';\nimport Sidebar, { IProps } from './Sidebar';\nimport { switchMic } from '../../actions/audio';\nimport { Dispatch } from 'redux';\nimport { IStore } from '../../types';\n\ntype StateProps = Pick<IProps, 'isMicActive' | 'playingNote'>;\ntype DispatchProps = Pick<IProps, 'switchMic'>\n\nconst mapStateToProps = (\n  { isMicActive, playingNote }: IStore\n): StateProps => ({\n  isMicActive,\n  playingNote,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => ({\n  switchMic: (isMicActive: boolean) => dispatch(switchMic(isMicActive))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Sidebar);\n","import { connect } from 'react-redux';\nimport Note, { IProps } from './Note';\nimport { IStore } from '../../types';\n\ntype StateProps = Pick<IProps, 'isSimilar' | 'isActive' | 'isInScale' | 'isKey'>;\ntype OwnProps = Pick<IProps, 'name' | 'octave'>;\n\nconst mapStateToProps = (\n  { playingNote, selectedScale, isMicActive }: IStore,\n  { name, octave }: OwnProps\n): StateProps => {\n  const\n    isSimilar = isMicActive && playingNote && playingNote.name === name,\n    isActive = isSimilar && (octave === null ? true : playingNote.octave === octave),\n    isInScale = selectedScale.notes.includes(name),\n    isKey = selectedScale.key === name;\n\n  return { isSimilar, isActive, isInScale, isKey };\n};\n\nexport default connect(mapStateToProps)(Note);\n","import React from 'react';\nimport './Guitar.scss';\nimport Note from '../Note/NoteContainer';\nimport { NOTES } from '../../constants';\nimport { GuitarOpenStrings, Note as NoteType } from '../../types';\n\ninterface Cell {\n  note: NoteType,\n}\n\nconst Cell: React.FC<Cell> = ({ note }) => (\n  <div className='guitar__cell'>\n    <div className=\"guitar__note\">\n      <Note {...note}/>\n    </div>\n  </div>\n);\n\nconst Zero: React.FC<Cell> = ({ note }) => (\n  <div className=\"guitar__zero\">\n    <div className=\"guitar__note\">\n      <Note {...note}/>\n    </div>\n  </div>\n);\n\ninterface Guitar {\n  frets: number,\n  startNotes: GuitarOpenStrings\n}\n\nconst Guitar: React.FC<Guitar> = ({ frets, startNotes }) => {\n  const strings = [];\n\n  for (let i = 0; i < 6; i++) {\n    const\n      cells = [],\n      startNote = startNotes[i],\n      startNoteIndex = NOTES.indexOf(startNote.name),\n      fretsWithZero = frets + 1;\n\n    let octave = startNote.octave || 0;\n\n    for (let j = 0; j < fretsWithZero; j++) {\n      const newNoteIndex = (j + startNoteIndex) % NOTES.length;\n\n      const\n        note = {\n          name: NOTES[newNoteIndex],\n          octave: newNoteIndex === 0 ? ++octave : octave,\n        };\n\n      if (j === 0) {\n        cells.push(<Zero note={note} key={j}/>);\n      } else {\n        cells.push(<Cell note={note} key={j}/>);\n      }\n    }\n\n    strings.push(<div key={i} className='guitar__string'>{cells}</div>);\n  }\n\n  return (\n    <div className=\"guitar\">\n      {strings}\n    </div>\n  );\n};\n\nexport default Guitar;\n","import React from 'react';\nimport './Piano.scss';\nimport { NOTES } from '../../constants';\nimport Note from '../Note/NoteContainer';\nimport { Note as NoteType } from '../../types';\n\nconst Key: React.FC<NoteType> = ({ name, octave }) => {\n  const note = {\n    name,\n    octave,\n  };\n\n  return (\n    <div className=\"piano__key\">\n      <div className=\"piano__note\">\n        <Note {...note}/>\n      </div>\n    </div>\n  );\n};\n\ninterface Piano {\n  octaves: number,\n  startNote: NoteType\n}\n\nconst Piano: React.FC<Piano> = ({ octaves = 3, startNote }) => {\n  const\n    keys = [],\n    keysCount = 12 * octaves;\n\n  for (let i = 0, octave = 0, note = { ...startNote }; i < keysCount; i++) {\n    const\n      noteIndex = NOTES.indexOf(note.name);\n\n    octave = note.octave ? note.octave : octave;\n\n    keys.push(<Key key={i} name={note.name} octave={octaves === 1 ? null : octave}/>);\n\n    if (!~noteIndex) continue;\n\n    const newNoteIndex = (noteIndex + 1) % NOTES.length;\n\n    if (newNoteIndex === 0) octave++;\n    note.name = NOTES[newNoteIndex];\n  }\n\n  return <div className=\"piano\">{keys}</div>;\n};\n\n\nexport default Piano;\n","import Guitar from './Guitar/Guitar';\nimport Piano from './Piano/Piano';\nimport React from 'react';\nimport { GuitarOpenStrings, Note, SelectedScale } from '../types';\n\nexport interface IProps {\n  guitarOpenStrings: GuitarOpenStrings,\n  pianoStartNote: Note,\n  selectedScale: SelectedScale,\n}\n\nconst Main: React.FC<IProps> = ({ guitarOpenStrings, pianoStartNote, selectedScale }) => (\n  <div className=\"application__main\">\n    <div className=\"board-container\">\n      <Guitar frets={18} startNotes={guitarOpenStrings}/>\n    </div>\n    <div className=\"board-container\">\n      <Piano octaves={4} startNote={pianoStartNote}/>\n    </div>\n  </div>\n);\n\nexport default Main;\n","import { connect } from 'react-redux';\nimport Main, { IProps } from './Main';\nimport { IStore } from '../types';\n\ntype StateProps = IProps;\n\nconst mapStateToProps = (\n  { guitarOpenStrings, pianoStartNote, selectedScale }: IStore\n): StateProps => {\n  return { guitarOpenStrings, pianoStartNote, selectedScale };\n};\n\nexport default connect(mapStateToProps)(Main);\n","import { createMuiTheme } from '@material-ui/core/styles';\n\n/**\n * @material-ui theme definitions\n */\n\nexport default createMuiTheme({\n  palette: {\n    type: 'dark',\n  },\n});\n","import React from 'react';\nimport { Drawer, Fab, Hidden, makeStyles, Theme } from '@material-ui/core';\nimport MenuIcon from '@material-ui/icons/Settings';\nimport CloseIcon from '@material-ui/icons/Close';\nimport MicIcon from '@material-ui/icons/Mic';\n\nconst SIDEBAR_WIDTH = 240;\n\ninterface IProps {\n  Sidebar: React.ComponentType,\n  Main: React.ComponentType,\n  isMicActive: boolean,\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  root: {\n    display: 'flex',\n  },\n  drawer: {\n    [theme.breakpoints.up('md')]: {\n      width: SIDEBAR_WIDTH,\n      flexShrink: 0,\n    },\n  },\n\n  menuButton: {\n    left: theme.spacing(2),\n    top: theme.spacing(2),\n    position: 'fixed',\n    zIndex: theme.zIndex.modal + 1,\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n\n  toolbar: theme.mixins.toolbar,\n  drawerPaper: {\n    background: '#212121',\n    border: 0,\n    width: SIDEBAR_WIDTH,\n    [theme.breakpoints.down('md')]: {\n      paddingTop: theme.spacing(8),\n    },\n  },\n  content: {\n    flexGrow: 1,\n    minWidth: 1100,\n    [theme.breakpoints.down('md')]: {\n      paddingTop: theme.spacing(6),\n    },\n  },\n}));\n\nconst Layout: React.FC<IProps> = ({ Sidebar, Main, isMicActive }) => {\n  const\n    classes = useStyles(),\n    [mobileOpen, setMobileOpen] = React.useState(false),\n    handleDrawerToggle = (): void => setMobileOpen(!mobileOpen),\n    drawer = <Sidebar/>;\n\n  let\n    menuIcon,\n    showMicIcon = false;\n\n  if (mobileOpen) {\n    menuIcon = <CloseIcon/>;\n  } else if (!isMicActive) {\n    menuIcon = <MicIcon/>;\n    showMicIcon = true;\n  } else {\n    menuIcon = <MenuIcon/>;\n  }\n\n  return (\n    <div className={classes.root}>\n\n      <div className={classes.menuButton}>\n        <Fab\n          size='small'\n          color={mobileOpen ? 'default' : 'secondary'}\n          className={`mobile-menu-icon${showMicIcon ? ' show-mic' : ''}`}\n          onClick={handleDrawerToggle}\n          aria-label='edit'\n        >\n          {menuIcon}\n        </Fab>\n      </div>\n\n      <nav className={classes.drawer}>\n        <Hidden mdUp implementation='css'>\n          <Drawer\n            variant='temporary'\n            anchor='left'\n            open={mobileOpen}\n            onClose={handleDrawerToggle}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            ModalProps={{\n              keepMounted: true,\n            }}\n          >\n            {drawer}\n          </Drawer>\n        </Hidden>\n        <Hidden smDown implementation='css'>\n          <Drawer\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            variant='permanent'\n            open\n          >\n            {drawer}\n          </Drawer>\n        </Hidden>\n      </nav>\n      <main className={classes.content}>\n        <Main/>\n      </main>\n    </div>\n  );\n};\n\nexport default Layout;\n","import React from 'react';\nimport './App.scss';\nimport audioService from '../audioCore';\nimport SidebarContainer from './Sidebar/SidebarContainer';\nimport MainContainer from './MainContainer';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport theme from '../theme';\nimport Layout from './Layout';\nimport { Note } from '../types';\n\nexport interface IProps {\n  isMicActive: boolean,\n  setPlayingNote: (note: Note) => void,\n}\n\nexport default class App extends React.Component<IProps> {\n  componentDidMount() {\n    audioService.on('notesDetected', (notesData: Note[] = []) => {\n      const\n        [note] = notesData,\n        setter = this.props.setPlayingNote;\n\n      typeof setter === 'function' && setter(note);\n    });\n  }\n\n  render() {\n    const { isMicActive } = this.props;\n\n    return (\n      <div className='application'>\n        <ThemeProvider theme={theme}>\n          <Layout\n            Sidebar={SidebarContainer}\n            Main={MainContainer}\n            isMicActive={isMicActive}\n          />\n        </ThemeProvider>\n      </div>\n    );\n  }\n}\n","import { connect } from 'react-redux';\nimport { Dispatch } from 'redux';\nimport App, { IProps } from './App';\nimport { setPlayingNote } from '../actions/audio';\nimport { IStore, Note } from '../types';\n\ntype StateProps = Pick<IProps, 'isMicActive'>;\ntype DispatchProps = Pick<IProps, 'setPlayingNote'>\n\nconst mapStateToProps = (\n  { isMicActive }: IStore\n): StateProps => ({ isMicActive });\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => ({\n  setPlayingNote: (note: Note) => dispatch(setPlayingNote(note)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.1/8 is considered localhost for IPv4.\n  window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n  )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n            'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { NOTES, SCALES } from './constants';\nimport { ScaleNotes } from './types';\n\nexport const generateScaleNotes = (scaleName: string, scaleKey: string): ScaleNotes => {\n  const\n    pattern = SCALES[scaleName],\n    scale = [scaleKey];\n\n  for (let i = 1; i < pattern.length; i++) {\n    const nextNoteIndex = (NOTES.indexOf(scale[i - 1]) + pattern[i - 1]) % NOTES.length;\n    scale.push(NOTES[nextNoteIndex]);\n  }\n\n  return scale;\n};\n","import { ACTION_TYPES, NOTES, SCALES_KEYS } from '../constants';\nimport { generateScaleNotes } from '../utils';\nimport { Action, Note, SelectedScale } from '../types';\n\nconst INITIAL_STATE = {\n  playingNote: {\n    name: 'C', octave: 3, cents: 0\n  },\n  isMicActive: false,\n\n  scale: {\n    name: SCALES_KEYS.MAJOR,\n    key: NOTES[0],\n    notes: generateScaleNotes(SCALES_KEYS.MAJOR, NOTES[0])\n  },\n};\n\nexport const playingNote =\n  (state: Note = INITIAL_STATE.playingNote, action: Action) => {\n    if (action.type === ACTION_TYPES.SET_PLAYING_NOTE) {\n      return action.payload;\n    }\n\n    return state;\n  };\n\nexport const isMicActive =\n  (state: boolean = INITIAL_STATE.isMicActive, action: Action) => {\n    if (action.type === ACTION_TYPES.SET_MIC_LISTEN) {\n      return action.payload;\n    }\n\n    return state;\n  };\n\nexport const selectedScale =\n  (state: SelectedScale = { ...INITIAL_STATE.scale }, action: Action): SelectedScale => {\n    switch (action.type) {\n\n      case ACTION_TYPES.SET_SCALE_NAME: {\n        const\n          { key } = state,\n          newName = action.payload;\n\n        return {\n          key,\n          name: newName,\n          notes: generateScaleNotes(newName, key)\n        };\n      }\n\n      case ACTION_TYPES.SET_SCALE_KEY: {\n        const\n          { name } = state,\n          newKey = action.payload;\n\n        return {\n          key: newKey,\n          name,\n          notes: generateScaleNotes(name, newKey)\n        };\n      }\n\n      default:\n        return state;\n    }\n  };\n","import { Action, GuitarOpenStrings } from '../types';\n\nconst DEFAULT_START_NOTES = [\n  { name: 'E', octave: 4 },\n  { name: 'B', octave: 3 },\n  { name: 'G', octave: 3 },\n  { name: 'D', octave: 3 },\n  { name: 'A', octave: 2 },\n  { name: 'E', octave: 2 },\n] as GuitarOpenStrings;\n\nexport const guitarOpenStrings =\n  (state: GuitarOpenStrings = DEFAULT_START_NOTES, action: Action): GuitarOpenStrings => {\n    return state;\n  };\n","import { Note } from '../types';\n\nconst DEFAULT_START_NOTE: Note = { name: 'C', octave: 2 };\n\nexport const pianoStartNote = (state: Note = DEFAULT_START_NOTE, action: string): Note => {\n  return state;\n};\n","import { combineReducers } from 'redux';\nimport { isMicActive, playingNote, selectedScale } from './audio';\nimport { guitarOpenStrings } from './guitar';\nimport { pianoStartNote } from './piano';\n\nexport default combineReducers({\n  playingNote,\n  isMicActive,\n  guitarOpenStrings,\n  pianoStartNote,\n  selectedScale,\n});\n","import { applyMiddleware, createStore, Middleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport * as reduxLogger from 'redux-logger';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport reducers from './reducers/root';\n\nconst\n  middlewares: Middleware[] = [thunk],\n  isDevMode = process.env.NODE_ENV === 'development';\n\nif (isDevMode) {\n  middlewares.push(reduxLogger.createLogger());\n}\n\nlet enhancer = applyMiddleware(...middlewares);\n\nif (isDevMode) {\n  enhancer = composeWithDevTools(enhancer);\n}\n\nexport default enhancer(createStore)(reducers);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport './index.scss';\nimport AppContainer from './components/AppContainer';\nimport * as serviceWorker from './serviceWorker';\nimport store from './store';\n\nconst render = () => {\n  ReactDOM.render(\n    <Provider store={store}>\n      <AppContainer/>\n    </Provider>,\n    document.getElementById('root'));\n};\n\nstore.subscribe(render);\nrender();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}