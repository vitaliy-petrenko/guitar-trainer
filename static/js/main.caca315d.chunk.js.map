{"version":3,"sources":["constants.ts","audioCore.js","components/Sidebar/Select.tsx","components/Sidebar/ScaleSettings.tsx","components/Sidebar/ScaleSettingsContainer.ts","store/audio/actions.ts","components/Note/Note.tsx","components/Tuner/Tuner.tsx","components/Sidebar/StartRecording.tsx","components/Sidebar/Heading.tsx","components/Sidebar/SidebarItem.tsx","components/Sidebar/Sidebar.tsx","components/Sidebar/SidebarContainer.ts","components/Note/NoteContainer.ts","components/Guitar/Guitar.tsx","components/Piano/Piano.tsx","components/Main.tsx","components/MainContainer.ts","theme.ts","components/Layout.tsx","components/App.tsx","components/AppContainer.ts","serviceWorker.ts","utils.ts","store/audio/reducers.ts","store/root.ts","store.ts","index.tsx"],"names":["NOTES","DIATONIC_SCALES","LYDIAN","MAJOR","MIXOLYDIAN","DORIAN","MINOR","PHRIGIAN","LOCRIAN","SCALES","SHOW_ALL","Array","fill","HARMONIC_MAJOR","MELODIC_MAJOR","MAJOR_PENTATONIC","MAJOR_BLUES","HARMONIC_MINOR","MELODIC_MINOR","MINOR_PENTATONIC","MINOR_BLUES","SCALES_KEYS","Object","keys","reduce","res","key","CUSTOM_SCALES_NAMES","SCALES_NAMES","split","map","sub","toUpperCase","slice","toLowerCase","join","ACTION_TYPES","middleA","semitone","bufferSize","_initGetUserMedia","window","AudioContext","webkitAudioContext","alert","undefined","navigator","mediaDevices","getUserMedia","constraints","webkitGetUserMedia","mozGetUserMedia","Promise","resolve","reject","call","audio","then","stream","audioContext","createMediaStreamSource","connect","analyser","scriptProcessor","destination","addEventListener","event","frequency","pitchDetector","do","inputBuffer","getChannelData","note","getNote","noteData","name","value","cents","getCents","octave","Math","floor","emit","catch","error","message","this","createAnalyser","createScriptProcessor","Aubio","aubio","Pitch","sampleRate","startRecord","log","round","pow","getStandardFrequency","oscillator","createOscillator","start","stop","EventEmitter","SidebarSelect","options","onSelect","selectedValue","title","optionsElements","MenuItem","id","uuid","v4","FormControl","fullWidth","variant","InputLabel","htmlFor","Select","inputProps","onChange","target","scaleKeysOptions","scalesOptions","entries","ScaleSettings","selectedScale","onSelectKey","onSelectScale","Grid","container","spacing","item","xs","dispatch","type","payload","scale","Note","isSimilar","isActive","isInScale","isKey","classNames","string","push","className","Arrow","Tuner","playingNote","StartRecording","Button","color","size","onClick","aria-label","role","Heading","children","Typography","gutterBottom","useStyles","makeStyles","theme","paper","padding","palette","text","secondary","SidebarItem","classes","Paper","Sidebar","isMicActive","switchMic","audioService","init","notes","includes","Cell","Zero","getMarkup","cache","Map","frets","startNotes","cacheKey","getCacheKey","inCache","get","strings","i","cells","startNote","startNoteIndex","indexOf","fretsWithZero","j","newNoteIndex","length","set","Guitar","Key","data-name","octaves","keysCount","noteIndex","Piano","Main","guitarOpenStrings","pianoStartNote","createMuiTheme","root","display","drawer","breakpoints","up","width","flexShrink","menuButton","left","top","position","zIndex","modal","toolbar","mixins","drawerPaper","background","border","down","paddingTop","content","flexGrow","minWidth","Layout","menuIcon","React","useState","mobileOpen","setMobileOpen","handleDrawerToggle","showMicIcon","Fab","Hidden","mdUp","implementation","Drawer","anchor","open","onClose","ModalProps","keepMounted","smDown","App","setPlayingNote","useEffect","on","notesData","setter","ThemeProvider","SidebarContainer","MainContainer","Boolean","location","hostname","match","generateScaleNotes","scaleName","scaleKey","pattern","nextNoteIndex","INITIAL_STATE","combineReducers","state","action","newName","newKey","middlewares","thunk","enhancer","applyMiddleware","createStore","reducers","render","ReactDOM","store","AppContainer","document","getElementById","subscribe","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.caca315d.chunk.js","sourcesContent":["import { IScaleKeys, IScalesIntervals, IScalesTranslations } from './types/audio'\n\nexport const NOTES: Array<string> = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B']\n\nexport const DIATONIC_SCALES = {\n  MAJOR: {\n    LYDIAN: [2, 2, 2, 1, 2, 2, 1],\n    MAJOR: [2, 2, 1, 2, 2, 2, 1],\n    MIXOLYDIAN: [2, 2, 1, 2, 2, 1, 2],\n    DORIAN: [2, 1, 2, 2, 2, 1, 2],\n  },\n\n  MINOR: {\n    MINOR: [2, 1, 2, 2, 1, 2, 2],\n    PHRIGIAN: [1, 2, 2, 2, 1, 2, 2],\n    LOCRIAN: [1, 2, 2, 1, 2, 2, 2],\n  },\n}\n\nexport const SCALES = {\n  SHOW_ALL: Array(12).fill(1),\n\n  ...DIATONIC_SCALES.MAJOR,\n  ...DIATONIC_SCALES.MINOR,\n\n  HARMONIC_MAJOR: [2, 2, 1, 2, 1, 3, 1],\n  MELODIC_MAJOR: [2, 2, 1, 2, 1, 2, 2],\n  MAJOR_PENTATONIC: [2, 2, 3, 2, 3],\n  MAJOR_BLUES: [2, 1, 1, 3, 2, 3],\n\n  HARMONIC_MINOR: [2, 1, 2, 2, 1, 3, 1],\n  MELODIC_MINOR: [2, 1, 2, 2, 2, 2, 1],\n  MINOR_PENTATONIC: [3, 2, 2, 3, 2],\n  MINOR_BLUES: [3, 2, 1, 1, 3, 2],\n} as IScalesIntervals\n\nexport const SCALES_KEYS = Object.keys(SCALES).reduce((res, key) => {\n  res[key] = key\n\n  return res\n}, {} as IScaleKeys)\n\nconst CUSTOM_SCALES_NAMES = {\n  MAJOR: 'Major/Ionian',\n  MINOR: 'Minor/Aeolian',\n} as IScalesTranslations\n\nexport const SCALES_NAMES = Object.keys(SCALES).reduce((res, key) => {\n  res[key] = CUSTOM_SCALES_NAMES[key] ? CUSTOM_SCALES_NAMES[key] : key\n    .split('_')\n    .map(sub => sub[0].toUpperCase() + sub.slice(1).toLowerCase())\n    .join(' ')\n\n  return res\n}, {} as IScalesTranslations)\n\nexport const ACTION_TYPES = {\n  SET_PLAYING_NOTE: 'SET_PLAYING_NOTE',\n  SET_MIC_LISTEN: 'SET_MIC_LISTEN',\n\n  SET_GUITAR_STRING_START_NOTE: 'SET_GUITAR_STRING_START_NOTE',\n  SET_PIANO_START_NOTE: 'SET_PIANO_START_NOTE',\n\n  SET_SCALE_NAME: 'SET_SCALE_NAME',\n  SET_SCALE_KEY: 'SET_SCALE_KEY',\n}\n\n","import EventEmitter from 'wolfy87-eventemitter'\nimport { NOTES } from './constants'\n\nclass AudioService extends EventEmitter {\n  middleA = 440\n  semitone = 69\n  bufferSize = 8192\n\n  constructor() {\n    super()\n\n    this._initGetUserMedia()\n  }\n\n  _initGetUserMedia() {\n    window.AudioContext = window.AudioContext || window.webkitAudioContext\n    if (!window.AudioContext) {\n      return alert('AudioContext not supported')\n    }\n\n    // Older browsers might not implement mediaDevices at all, so we set an empty object first\n    if (navigator.mediaDevices === undefined) {\n      navigator.mediaDevices = {}\n    }\n\n    // Some browsers partially implement mediaDevices. We can't just assign an object\n    // with getUserMedia as it would overwrite existing properties.\n    // Here, we will just add the getUserMedia property if it's missing.\n    if (navigator.mediaDevices.getUserMedia === undefined) {\n      navigator.mediaDevices.getUserMedia = function (constraints) {\n        // First get ahold of the legacy getUserMedia, if present\n        const getUserMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia\n\n        // Some browsers just don't implement it - return a rejected promise with an error\n        // to keep a consistent interface\n        if (!getUserMedia) {\n          alert('getUserMedia is not implemented in this browser')\n        }\n\n        // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\n        return new Promise(function (resolve, reject) {\n          getUserMedia.call(navigator, constraints, resolve, reject)\n        })\n      }\n    }\n  }\n\n  startRecord() {\n    navigator.mediaDevices\n      .getUserMedia({ audio: true })\n      .then(stream => {\n        this.audioContext.createMediaStreamSource(stream).connect(this.analyser)\n        this.analyser.connect(this.scriptProcessor)\n        this.scriptProcessor.connect(this.audioContext.destination)\n\n        this.scriptProcessor.addEventListener('audioprocess', event => {\n\n          const frequency = this.pitchDetector.do(event.inputBuffer.getChannelData(0))\n\n          if (frequency) {\n            const\n              note = this.getNote(frequency),\n              noteData = {\n                name: NOTES[note % 12],\n                value: note,\n                cents: this.getCents(frequency, note),\n                octave: Math.floor(note / 12) - 1,\n                frequency: frequency,\n              }\n\n            if (note >= 30) {\n              this.emit('notesDetected', [noteData])\n            }\n          }\n        })\n      })\n      .catch(function (error) {\n        alert(error.name + ': ' + error.message)\n      })\n  }\n\n  init() {\n    this.audioContext = new window.AudioContext()\n    this.analyser = this.audioContext.createAnalyser()\n    this.scriptProcessor = this.audioContext.createScriptProcessor(this.bufferSize)\n\n    window.Aubio().then(aubio => {\n      this.pitchDetector = new aubio.Pitch('default', this.bufferSize, 1, this.audioContext.sampleRate)\n      this.startRecord()\n    })\n  }\n\n  /**\n   * get musical Note from frequency\n   *\n   * @param {number} frequency\n   * @returns {number}\n   */\n  getNote(frequency) {\n    const note = 12 * (Math.log(frequency / this.middleA) / Math.log(2))\n    return Math.round(note) + this.semitone\n  }\n\n  /**\n   * get the musical Note's standard frequency\n   *\n   * @param note\n   * @returns {number}\n   */\n  getStandardFrequency(note) {\n    return this.middleA * Math.pow(2, (note - this.semitone) / 12)\n  }\n\n  /**\n   * get cents difference between given frequency and musical Note's standard frequency\n   *\n   * @param {number} frequency\n   * @param {number} note\n   * @returns {number}\n   */\n  getCents(frequency, note) {\n    return Math.floor((1200 * Math.log(frequency / this.getStandardFrequency(note))) / Math.log(2))\n  }\n\n  /**\n   * play the musical Note\n   *\n   * @param {number} frequency\n   */\n  play(frequency) {\n    if (!this.oscillator) {\n      this.oscillator = this.audioContext.createOscillator()\n      this.oscillator.connect(this.audioContext.destination)\n      this.oscillator.start()\n    }\n\n    this.oscillator.frequency.value = frequency\n  }\n\n  stop() {\n    this.oscillator.stop()\n    this.oscillator = null\n  }\n}\n\nexport default new AudioService()\n","import { FormControl, InputLabel, MenuItem, Select } from '@material-ui/core'\nimport React from 'react'\nimport uuid from 'uuid'\n\nexport type TSelectValue = string;\n\nexport interface ISelectOption {\n  name: string,\n  value: TSelectValue,\n}\n\nexport interface IProps {\n  options: ISelectOption[],\n  title: string,\n  selectedValue: TSelectValue,\n  onSelect: (key: TSelectValue) => void,\n}\n\nconst SidebarSelect: React.FC<IProps> = ({ options, onSelect, selectedValue, title }) => {\n  const\n    optionsElements = options.map(({ name, value }) => <MenuItem key={value} value={value}>{name}</MenuItem>),\n    handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n      onSelect(event.target.value as string)\n    },\n    id = uuid.v4()\n\n  return (\n    <FormControl fullWidth variant=\"filled\">\n      <InputLabel htmlFor={id}>\n        {title}\n      </InputLabel>\n      <Select\n        value={selectedValue}\n        inputProps={{ id }}\n        onChange={handleChange}\n      >\n        {optionsElements}\n      </Select>\n    </FormControl>\n  )\n}\n\nexport default SidebarSelect\n","import React from 'react'\nimport { Grid } from '@material-ui/core'\nimport Select, { ISelectOption, TSelectValue } from './Select'\nimport { ISelectedScale } from '../../types/audio'\nimport { NOTES, SCALES_NAMES } from '../../constants'\n\nexport interface IProps {\n  selectedScale: ISelectedScale,\n  onSelectKey: (key: TSelectValue) => void,\n  onSelectScale: (key: TSelectValue) => void,\n}\n\nconst scaleKeysOptions: ISelectOption[] = NOTES.map(note => ({\n  name: note,\n  value: note,\n}))\n\nconst scalesOptions: ISelectOption[] = Object.entries(SCALES_NAMES).map(([key, name]) => ({ name, value: key }))\n\nconst ScaleSettings: React.FC<IProps> = ({ selectedScale, onSelectKey, onSelectScale }) => {\n  return (\n    <Grid container spacing={2}>\n      <Grid item xs={12}>\n        <Select\n          selectedValue={selectedScale.key}\n          options={scaleKeysOptions}\n          onSelect={onSelectKey}\n          title='Select key'\n        />\n      </Grid>\n      <Grid item xs={12}>\n        <Select\n          selectedValue={selectedScale.name}\n          options={scalesOptions}\n          onSelect={onSelectScale}\n          title='Select scale'\n        />\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default ScaleSettings\n","import { connect } from 'react-redux'\nimport { selectScale, selectScaleKey } from '../../store/audio/actions'\nimport { Dispatch } from 'redux'\nimport { IStore } from '../../store/root'\nimport ScaleSettings, { IProps } from './ScaleSettings'\n\ntype StateProps = Pick<IProps, 'selectedScale'>;\ntype DispatchProps = Pick<IProps, 'onSelectKey' | 'onSelectScale'>\n\nconst mapStateToProps = (\n  { selectedScale }: IStore\n): StateProps => ({\n  selectedScale,\n})\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => ({\n  onSelectKey: (key: string) => dispatch(selectScaleKey(key)),\n  onSelectScale: (scale: string) => dispatch(selectScale(scale)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ScaleSettings)\n","import { ACTION_TYPES } from '../../constants'\nimport { INote } from '../../types/audio'\nimport { ISelectScaleAction, ISelectScaleKeyAction, ISetPlayingNoteAction, ISwitchMicAction } from './types'\n\nexport const switchMic = (isMicActive: boolean): ISwitchMicAction => ({\n  type: ACTION_TYPES.SET_MIC_LISTEN,\n  payload: isMicActive,\n})\n\nexport const setPlayingNote = (note: INote): ISetPlayingNoteAction => ({\n  type: ACTION_TYPES.SET_PLAYING_NOTE,\n  payload: note,\n})\n\nexport const selectScale = (scaleName: string): ISelectScaleAction => ({\n  type: ACTION_TYPES.SET_SCALE_NAME,\n  payload: scaleName,\n})\n\nexport const selectScaleKey = (scaleKey: string): ISelectScaleKeyAction => ({\n  type: ACTION_TYPES.SET_SCALE_KEY,\n  payload: scaleKey,\n})\n","import React from 'react'\nimport './Note.scss'\nimport { INote } from '../../types/audio'\n\nexport interface IProps extends INote {\n  isActive?: boolean,\n  isSimilar?: boolean,\n  isInScale?: boolean,\n  isKey?: boolean,\n}\n\nconst Note: React.FC<IProps> = ({ name, octave, isSimilar = false, isActive = true, isInScale = true, isKey = false }) => {\n  const\n    classNames = ['note', `note--${name[0].toLowerCase()}${name[1] === '#' ? '-diez' : ''}`],\n    string = `${name}${octave ? octave : ''}`\n\n  if (isSimilar) {\n    classNames.push('is-similar')\n  }\n\n  if (isActive) {\n    classNames.push('is-active')\n  }\n\n  if (!isInScale) {\n    classNames.push('is-disabled')\n  }\n\n  if (isKey) {\n    classNames.push('is-key')\n  }\n\n  return (\n    <div className={classNames.join(' ')}>{string}</div>\n  )\n}\n\n\nexport default Note\n","import React from 'react'\nimport './Tuner.scss'\nimport Note from '../Note/Note'\nimport { IPlayingNote } from '../../types/audio'\n\nconst REASONABLE_DELTA = 6\n\ninterface ITunerArrow {\n  isActive: boolean\n}\n\nconst Arrow: React.FC<ITunerArrow> = ({ isActive }) => {\n  const classNames = ['tuner__arrow']\n\n  if (isActive) {\n    classNames.push('is-active')\n  }\n\n  return (\n    <div className={classNames.join(' ')}/>\n  )\n}\n\ninterface IProps {\n  playingNote: IPlayingNote\n}\n\nconst Tuner: React.FC<IProps> = ({ playingNote }) => {\n  return (\n    <div className='tuner'>\n      <div className=\"tuner__col\">\n        <Arrow isActive={playingNote.cents < -REASONABLE_DELTA}/>\n      </div>\n      <div className=\"tuner__col tuner__note\">\n        <Note\n          isActive={playingNote.cents >= -REASONABLE_DELTA && playingNote.cents <= REASONABLE_DELTA}\n          name={playingNote.name}\n          octave={playingNote.octave}\n        />\n      </div>\n      <div className=\"tuner__col\">\n        <Arrow isActive={playingNote.cents > REASONABLE_DELTA}/>\n      </div>\n    </div>\n  )\n}\n\nexport default Tuner\n","import { Button } from '@material-ui/core'\nimport React from 'react'\n\ninterface IProps {\n  start: () => void,\n}\n\nconst StartRecording: React.FC<IProps> = ({ start }) => (\n  <Button fullWidth variant='contained' color='secondary' size='large' onClick={start}>\n    <span aria-label='microphone' role='img'>ðŸŽ¤</span>&nbsp;Enable Recording\n  </Button>\n)\n\nexport default StartRecording\n","import React from 'react'\nimport { Typography } from '@material-ui/core'\n\nconst Heading: React.FC = ({ children }) => (\n  <Typography variant='h6' gutterBottom>\n    {children}\n  </Typography>\n)\nexport default Heading\n","import React from 'react'\nimport { makeStyles, Paper } from '@material-ui/core'\nimport Heading from './Heading'\n\nconst\n  useStyles = makeStyles(theme => ({\n    paper: {\n      padding: theme.spacing(2),\n      color: theme.palette.text.secondary,\n    },\n  }))\n\nexport interface IProps {\n  title?: string,\n}\n\nconst SidebarItem: React.FC<IProps> = ({ title, children }) => {\n  const classes = useStyles()\n\n  return (\n    <div className=\"sidebar__item\">\n      <Paper className={classes.paper}>\n        {title && (\n          <Heading>\n            {title}\n          </Heading>\n        )}\n        {children}\n      </Paper>\n    </div>\n  )\n}\n\nexport default SidebarItem\n","import React from 'react'\nimport './Sidebar.scss'\nimport audioService from '../../audioCore'\nimport ScaleSettings from './ScaleSettingsContainer'\nimport Tuner from '../Tuner/Tuner'\nimport StartRecording from './StartRecording'\nimport SidebarItem from './SidebarItem'\nimport { IPlayingNote } from '../../types/audio'\nimport { Typography } from '@material-ui/core'\n\nexport interface IProps {\n  isMicActive: boolean,\n  playingNote: IPlayingNote,\n  switchMic: (key: boolean) => void,\n}\n\nconst Sidebar: React.FC<IProps> = (\n  { isMicActive, playingNote, switchMic }\n) => {\n  const\n    initAudio = () => {\n      switchMic(true)\n      audioService.init()\n    }\n\n  return (\n    <div className='sidebar'>\n      <div className=\"sidebar__in\">\n        {!isMicActive && (\n          <StartRecording start={initAudio}/>\n        )}\n\n        <SidebarItem title='Mini Tuner'>\n          {!isMicActive ? (\n            <Typography variant='subtitle2' color='error'>\n              Enable recording to use tuner\n            </Typography>\n          ) : (\n            <Tuner playingNote={playingNote}/>\n          )}\n        </SidebarItem>\n\n        <SidebarItem title='Scale Settings'>\n          <ScaleSettings/>\n        </SidebarItem>\n      </div>\n    </div>\n  )\n}\n\n\nexport default Sidebar\n","import { connect } from 'react-redux'\nimport Sidebar, { IProps } from './Sidebar'\nimport { switchMic } from '../../store/audio/actions'\nimport { Dispatch } from 'redux'\nimport { IStore } from '../../store/root'\n\ntype StateProps = Pick<IProps, 'isMicActive' | 'playingNote'>;\ntype DispatchProps = Pick<IProps, 'switchMic'>\n\nconst mapStateToProps = (\n  { isMicActive, playingNote }: IStore\n): StateProps => ({\n  isMicActive,\n  playingNote,\n})\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => ({\n  switchMic: (isMicActive: boolean) => dispatch(switchMic(isMicActive))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Sidebar)\n","import { connect } from 'react-redux'\nimport Note, { IProps } from './Note'\nimport { IStore } from '../../store/root'\n\ntype StateProps = Pick<IProps, 'isSimilar' | 'isActive' | 'isInScale' | 'isKey'>;\ntype OwnProps = Pick<IProps, 'name' | 'octave'>;\n\nconst mapStateToProps = (\n  { playingNote, selectedScale, isMicActive }: IStore,\n  { name, octave }: OwnProps\n): StateProps => {\n  const\n    isSimilar = isMicActive && playingNote && playingNote.name === name,\n    isActive = isSimilar && (octave === null ? true : playingNote.octave === octave),\n    isInScale = selectedScale.notes.includes(name),\n    isKey = selectedScale.key === name\n\n  return { isSimilar, isActive, isInScale, isKey }\n}\n\nexport default connect(mapStateToProps)(Note)\n","import React, { ReactElement } from 'react'\nimport './Guitar.scss'\nimport Note from '../Note/NoteContainer'\nimport { NOTES } from '../../constants'\nimport { INote, TGuitarOpenStrings } from '../../types/audio'\n\ninterface ICell {\n  note: INote,\n}\n\nconst Cell: React.FC<ICell> = ({ note }) => (\n  <div className='guitar__cell'>\n    <div className=\"guitar__note\">\n      <Note {...note}/>\n    </div>\n  </div>\n)\n\nconst Zero: React.FC<ICell> = ({ note }) => (\n  <div className=\"guitar__zero\">\n    <div className=\"guitar__note\">\n      <Note {...note}/>\n    </div>\n  </div>\n)\n\ninterface IProps {\n  frets: number,\n  startNotes: TGuitarOpenStrings\n}\n\nconst getMarkup = (() => {\n  const\n    cache = new Map(),\n    getCacheKey = ({ frets, startNotes }: IProps): string =>\n      `${frets}.${startNotes.map(({ name, octave }) => name + octave).join('.')}`\n\n  return ({ frets, startNotes }: IProps): ReactElement[] => {\n    const\n      cacheKey = getCacheKey({ frets, startNotes }),\n      inCache = cache.get(cacheKey),\n      strings = []\n\n    if (inCache) return inCache\n\n    for (let i = 0; i < 6; i++) {\n      const\n        cells = [],\n        startNote = startNotes[i],\n        startNoteIndex = NOTES.indexOf(startNote.name),\n        fretsWithZero = frets + 1\n\n      let octave = startNote.octave || 0\n\n      for (let j = 0; j < fretsWithZero; j++) {\n        const newNoteIndex = (j + startNoteIndex) % NOTES.length\n\n        const\n          note = {\n            name: NOTES[newNoteIndex],\n            octave: newNoteIndex === 0 ? ++octave : octave,\n          }\n\n        if (j === 0) {\n          cells.push(<Zero note={note} key={j}/>)\n        } else {\n          cells.push(<Cell note={note} key={j}/>)\n        }\n      }\n\n      strings.push(<div key={i} className='guitar__string'>{cells}</div>)\n    }\n\n    cache.set(cacheKey, strings)\n\n    return strings\n  }\n})()\n\nexport const Guitar: React.FC<IProps> = ({ frets, startNotes }) => (\n  <div className=\"guitar\">\n    {getMarkup({ frets, startNotes })}\n  </div>\n)\n\nexport default Guitar\n","import React, { ReactElement } from 'react'\nimport './Piano.scss'\nimport { NOTES } from '../../constants'\nimport Note from '../Note/NoteContainer'\nimport { INote } from '../../types/audio'\n\nconst Key: React.FC<INote> = ({ name, octave }) => {\n  const note = {\n    name,\n    octave,\n  }\n\n  return (\n    <div className=\"piano__key\" data-name={name}>\n      <div className=\"piano__note\">\n        <Note {...note}/>\n      </div>\n    </div>\n  )\n}\n\ninterface IProps {\n  octaves: number,\n  startNote: INote,\n}\n\nconst getMarkup = (() => {\n  const\n    cache = new Map(),\n    getCacheKey = ({ startNote, octaves }: IProps): string =>\n      `${octaves}.${startNote.name}.${startNote.octave}`\n\n  return ({ startNote, octaves }: IProps): ReactElement[] => {\n    const\n      cacheKey = getCacheKey({ startNote, octaves }),\n      inCache = cache.get(cacheKey),\n      keys = [],\n      keysCount = 12 * octaves\n\n    if (inCache) return inCache\n\n    let octave = startNote.octave || 2\n\n    for (let i = 0, note = { ...startNote }; i < keysCount; i++) {\n      const\n        noteIndex = NOTES.indexOf(note.name)\n\n      keys.push(<Key key={i} name={note.name} octave={octaves === 1 ? null : octave}/>)\n\n      if (!~noteIndex) continue\n\n      const newNoteIndex = (noteIndex + 1) % NOTES.length\n\n      if (newNoteIndex === 0) octave++\n      note.name = NOTES[newNoteIndex]\n    }\n\n    cache.set(cacheKey, keys)\n\n    return keys\n  }\n})()\n\nexport const Piano: React.FC<IProps> = ({ octaves, startNote }) => (\n  <div className=\"piano\">{getMarkup({ octaves, startNote })}</div>\n)\n\nexport default Piano\n","import Guitar from './Guitar/Guitar'\nimport Piano from './Piano/Piano'\nimport React from 'react'\nimport { INote, ISelectedScale, TGuitarOpenStrings } from '../types/audio'\n\nexport interface IProps {\n  guitarOpenStrings: TGuitarOpenStrings,\n  pianoStartNote: INote,\n  selectedScale: ISelectedScale,\n}\n\nconst Main: React.FC<IProps> = ({ guitarOpenStrings, pianoStartNote, selectedScale }) => (\n  <div className=\"application__main\">\n    <div className=\"board-container\">\n      <Guitar frets={18} startNotes={guitarOpenStrings}/>\n    </div>\n    <div className=\"board-container\">\n      <Piano octaves={4} startNote={pianoStartNote}/>\n    </div>\n  </div>\n)\n\nexport default Main\n","import { connect } from 'react-redux'\nimport Main, { IProps } from './Main'\nimport { IStore } from '../store/root'\n\ntype StateProps = IProps;\n\nconst mapStateToProps = (\n  { guitarOpenStrings, pianoStartNote, selectedScale }: IStore\n): StateProps => {\n  return { guitarOpenStrings, pianoStartNote, selectedScale }\n}\n\nexport default connect(mapStateToProps)(Main)\n","import { createMuiTheme } from '@material-ui/core/styles'\n\n/**\n * @material-ui theme definitions\n */\n\nexport default createMuiTheme({\n  palette: {\n    type: 'dark',\n  },\n})\n","import React from 'react'\nimport { Drawer, Fab, Hidden, makeStyles, Theme } from '@material-ui/core'\nimport MenuIcon from '@material-ui/icons/Settings'\nimport CloseIcon from '@material-ui/icons/Close'\nimport MicIcon from '@material-ui/icons/Mic'\n\nconst SIDEBAR_WIDTH = 240\n\ninterface IProps {\n  Sidebar: React.ComponentType,\n  Main: React.ComponentType,\n  isMicActive: boolean,\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  root: {\n    display: 'flex',\n  },\n  drawer: {\n    [theme.breakpoints.up('md')]: {\n      width: SIDEBAR_WIDTH,\n      flexShrink: 0,\n    },\n  },\n\n  menuButton: {\n    left: theme.spacing(2),\n    top: theme.spacing(2),\n    position: 'fixed',\n    zIndex: theme.zIndex.modal + 1,\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n\n  toolbar: theme.mixins.toolbar,\n  drawerPaper: {\n    background: '#212121',\n    border: 0,\n    width: SIDEBAR_WIDTH,\n    [theme.breakpoints.down('md')]: {\n      paddingTop: theme.spacing(8),\n    },\n  },\n  content: {\n    flexGrow: 1,\n    minWidth: 1100,\n    [theme.breakpoints.down('md')]: {\n      paddingTop: theme.spacing(6),\n    },\n  },\n}))\n\nconst Layout: React.FC<IProps> = ({ Sidebar, Main, isMicActive }) => {\n  const\n    classes = useStyles(),\n    [mobileOpen, setMobileOpen] = React.useState(false),\n    handleDrawerToggle = (): void => setMobileOpen(!mobileOpen),\n    drawer = <Sidebar/>\n\n  let\n    menuIcon,\n    showMicIcon = false\n\n  if (mobileOpen) {\n    menuIcon = <CloseIcon/>\n  } else if (!isMicActive) {\n    menuIcon = <MicIcon/>\n    showMicIcon = true\n  } else {\n    menuIcon = <MenuIcon/>\n  }\n\n  return (\n    <div className={classes.root}>\n\n      <div className={classes.menuButton}>\n        <Fab\n          size='small'\n          color={mobileOpen ? 'default' : 'secondary'}\n          className={`mobile-menu-icon${showMicIcon ? ' show-mic' : ''}`}\n          onClick={handleDrawerToggle}\n          aria-label='edit'\n        >\n          {menuIcon}\n        </Fab>\n      </div>\n\n      <nav className={classes.drawer}>\n        <Hidden mdUp implementation='css'>\n          <Drawer\n            variant='temporary'\n            anchor='left'\n            open={mobileOpen}\n            onClose={handleDrawerToggle}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            ModalProps={{\n              keepMounted: true,\n            }}\n          >\n            {drawer}\n          </Drawer>\n        </Hidden>\n        <Hidden smDown implementation='css'>\n          <Drawer\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            variant='permanent'\n            open\n          >\n            {drawer}\n          </Drawer>\n        </Hidden>\n      </nav>\n      <main className={classes.content}>\n        <Main/>\n      </main>\n    </div>\n  )\n}\n\nexport default Layout\n","import React, { useEffect } from 'react'\nimport './App.scss'\nimport audioService from '../audioCore'\nimport SidebarContainer from './Sidebar/SidebarContainer'\nimport MainContainer from './MainContainer'\nimport { ThemeProvider } from '@material-ui/core/styles'\nimport theme from '../theme'\nimport Layout from './Layout'\nimport { INote } from '../types/audio'\n\nexport interface IProps {\n  isMicActive: boolean,\n  setPlayingNote: (note: INote) => void,\n}\n\nconst App: React.FC<IProps> = ({ isMicActive, setPlayingNote }) => {\n  useEffect(() => {\n    audioService.on('notesDetected', (notesData: INote[] = []) => {\n      const\n        [note] = notesData,\n        setter = setPlayingNote\n\n      typeof setter === 'function' && setter(note)\n    })\n  })\n\n  return (\n    <div className='application'>\n      <ThemeProvider theme={theme}>\n        <Layout\n          Sidebar={SidebarContainer}\n          Main={MainContainer}\n          isMicActive={isMicActive}\n        />\n      </ThemeProvider>\n    </div>\n  )\n}\n\nexport default App\n","import { connect } from 'react-redux'\nimport { Dispatch } from 'redux'\nimport App, { IProps } from './App'\nimport { setPlayingNote } from '../store/audio/actions'\nimport { INote } from '../types/audio'\nimport { IStore } from '../store/root'\n\ntype StateProps = Pick<IProps, 'isMicActive'>;\ntype DispatchProps = Pick<IProps, 'setPlayingNote'>\n\nconst mapStateToProps = (\n  { isMicActive }: IStore\n): StateProps => ({ isMicActive })\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => ({\n  setPlayingNote: (note: INote) => dispatch(setPlayingNote(note)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.1/8 is considered localhost for IPv4.\n  window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n  )\n)\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    )\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n            'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import { NOTES, SCALES } from './constants'\nimport { TScaleNotes } from './types/audio'\n\nexport const generateScaleNotes = (scaleName: string, scaleKey: string): TScaleNotes => {\n  const\n    pattern = SCALES[scaleName],\n    scale = [scaleKey]\n\n  for (let i = 1; i < pattern.length; i++) {\n    const nextNoteIndex = (NOTES.indexOf(scale[i - 1]) + pattern[i - 1]) % NOTES.length\n    scale.push(NOTES[nextNoteIndex])\n  }\n\n  return scale\n}\n","import { ACTION_TYPES, NOTES, SCALES_KEYS } from '../../constants'\nimport { generateScaleNotes } from '../../utils'\nimport { INote, ISelectedScale, TGuitarOpenStrings } from '../../types/audio'\nimport { ISelectScaleAction, ISelectScaleKeyAction, ISetPlayingNoteAction, ISwitchMicAction } from './types'\n\nconst INITIAL_STATE = {\n  playingNote: {\n    name: 'C', octave: 3, cents: 0\n  },\n  isMicActive: false,\n\n  scale: {\n    name: SCALES_KEYS.MAJOR,\n    key: NOTES[0],\n    notes: generateScaleNotes(SCALES_KEYS.MAJOR, NOTES[0])\n  },\n\n  pianoStartNote: { name: 'C', octave: 2 },\n\n  guitarOpenStrings: [\n    { name: 'E', octave: 4 },\n    { name: 'B', octave: 3 },\n    { name: 'G', octave: 3 },\n    { name: 'D', octave: 3 },\n    { name: 'A', octave: 2 },\n    { name: 'E', octave: 2 },\n  ]\n}\n\nexport const playingNote =\n  (state: INote = INITIAL_STATE.playingNote, action: ISetPlayingNoteAction) => {\n    if (action.type === ACTION_TYPES.SET_PLAYING_NOTE) {\n      return action.payload\n    }\n\n    return state\n  }\n\nexport const isMicActive =\n  (state: boolean = INITIAL_STATE.isMicActive, action: ISwitchMicAction) => {\n    if (action.type === ACTION_TYPES.SET_MIC_LISTEN) {\n      return action.payload\n    }\n\n    return state\n  }\n\nexport const selectedScale =\n  (state: ISelectedScale = { ...INITIAL_STATE.scale }, action: ISelectScaleAction | ISelectScaleKeyAction): ISelectedScale => {\n    switch (action.type) {\n\n      case ACTION_TYPES.SET_SCALE_NAME: {\n        const\n          { key } = state,\n          newName = action.payload\n\n        return {\n          key,\n          name: newName,\n          notes: generateScaleNotes(newName, key)\n        }\n      }\n\n      case ACTION_TYPES.SET_SCALE_KEY: {\n        const\n          { name } = state,\n          newKey = action.payload\n\n        return {\n          key: newKey,\n          name,\n          notes: generateScaleNotes(name, newKey)\n        }\n      }\n\n      default:\n        return state\n    }\n  }\n\nexport const pianoStartNote = (state: INote = INITIAL_STATE.pianoStartNote): INote => {\n  return state\n}\n\nexport const guitarOpenStrings = (state: TGuitarOpenStrings = INITIAL_STATE.guitarOpenStrings): TGuitarOpenStrings => {\n  return state\n}\n","import { combineReducers } from 'redux'\nimport { guitarOpenStrings, isMicActive, pianoStartNote, playingNote, selectedScale } from './audio/reducers'\nimport { INote, IPlayingNote, ISelectedScale, TGuitarOpenStrings } from '../types/audio'\n\nexport interface IStore {\n  playingNote: IPlayingNote,\n  isMicActive: boolean,\n  guitarOpenStrings: TGuitarOpenStrings,\n  pianoStartNote: INote,\n  selectedScale: ISelectedScale\n}\n\nexport default combineReducers({\n  playingNote,\n  isMicActive,\n  guitarOpenStrings,\n  pianoStartNote,\n  selectedScale,\n})\n","import { applyMiddleware, createStore, Middleware } from 'redux'\nimport thunk from 'redux-thunk'\nimport * as reduxLogger from 'redux-logger'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport reducers from './store/root'\n\nconst\n  middlewares: Middleware[] = [thunk],\n  isDevMode = process.env.NODE_ENV === 'development'\n\nif (isDevMode) {\n  middlewares.push(reduxLogger.createLogger())\n}\n\nlet enhancer = applyMiddleware(...middlewares)\n\nif (isDevMode) {\n  enhancer = composeWithDevTools(enhancer)\n}\n\nexport default enhancer(createStore)(reducers)\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport './index.scss'\nimport AppContainer from './components/AppContainer'\nimport * as serviceWorker from './serviceWorker'\nimport store from './store'\n\nconst render = () => {\n  ReactDOM.render(\n    <Provider store={store}>\n      <AppContainer/>\n    </Provider>,\n    document.getElementById('root'))\n}\n\nstore.subscribe(render)\nrender()\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}